<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Robust Graph SLAM using ICP-Based LIDAR Scan Matching and EKF-IMU preintegration | Thanh-Loc (Leo) PHAM </title> <meta name="author" content="Thanh-Loc (Leo) PHAM"> <meta name="description" content="Localization"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/blue_drone_1.png?70208d7871b68e4d8d161d6e46084d01"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://leopt4.github.io/projects/4_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Thanh-Loc</span> (Leo) PHAM </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container-project mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Robust Graph SLAM using ICP-Based LIDAR Scan Matching and EKF-IMU preintegration</h1> <p class="post-description">Localization</p> </header> <article> <p>Collaborator(s): Atharva Patwe</p> <div class="row justify-content-sm-left"> <div class="col-sm-2 mt-3 mt-md-0"> <a href="https://github.com/patweatharva/ROS-LLM/tree/more_contrib_pi/" rel="external nofollow noopener" target="_blank"><img class="emoji" title=":floppy_disk:" alt=":floppy_disk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4be.png" height="20" width="20"> Code</a> </div> <div class="col-sm-2 mt-3 mt-md-0"> <a href="https://github.com/patweatharva/ROS-LLM/blob/more_contrib_pi/documents/report.pdf" rel="external nofollow noopener" target="_blank"><img class="emoji" title=":memo:" alt=":memo:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4dd.png" height="20" width="20"> Report</a> </div> <div class="col-sm-2 mt-3 mt-md-0"> <a href="https://www.youtube.com/embed/caqlL3B6gi8" rel="external nofollow noopener" target="_blank"><img class="emoji" title=":clapper:" alt=":clapper:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f3ac.png" height="20" width="20"> Demo Videos</a> </div> </div> <hr> <p>This work aims to implement a robust <strong>Simultaneous Localization and Mapping</strong> algorithm on a turtlebot platform using onboard sensors - 2D Lidar, Wheel Encoders, and Magnetometer compass. This study explores the implementation of <strong>online SLAM</strong> and <strong>full SLAM</strong> using <strong>factor graphs</strong>, specifically leveraging the <strong>Georgia Tech Smoothing and Mapping (GTSAM)</strong> library on a turtlebot robot platform with the <strong>Robot Operating System (ROS)</strong>. Our study also incorporates the Closed form <strong>ICP covariance estimation</strong> method proposed by an existing work.</p> <h2 id="methodology">Methodology</h2> <p>The factors of the graph are estimated with the help of two separate navigators</p> <ul> <li>Scan Matching Navigator: the scans obtained from the lidar are converted into the robot base frame after and registered with all the scan saved earlier using transformations obtained from matching. The pointcloud matching is carried out by ICP algorithm giving the transformation between the scans which are then added to the graph as Pose 2D constraints with some uncertainty.</li> <li>EKF Odometry: the odometry factors are estimated using an Extended Kalman Filter (EKF). The EKF predicts the robot’s pose based on encoder readings and updates this prediction with compass measurements.</li> </ul> <p>The sampling frequency of the wheel encoder and compass is relatively high, in the range of 100-200 Hz, allowing the EKF Odometry Navigator to update odometry at a high rate. The Lidar, however, operates at a much lower frequency. To obtain meaningful scan matching results, the robot needs to have some displacement between subsequent Lidar scans. Therefore, new poses are added at the frequency of Lidar matches. Between two Lidar matches, the odometry data is preintegrated and added once along with the scan matching factor.</p> <div class="row justify-content-sm-center"> <div class="col-sm-7 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/Graph%20SLAM%20ROS%20Package%20Architecture-480.webp 480w,/assets/img/project_4/Graph%20SLAM%20ROS%20Package%20Architecture-800.webp 800w,/assets/img/project_4/Graph%20SLAM%20ROS%20Package%20Architecture-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/Graph%20SLAM%20ROS%20Package%20Architecture.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Graph SLAM ROS Package Architecture" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Graph SLAM ROS Package Architecture. </div> <p>The uncertainty of the odometry is calculated by the EKF by tuning the uncertainties of the encoders and compass. The final covariance matrix of the odometry is used to estimate the Gaussian noise model for that factor. On the other hand, since ICP does not have a built-in covariance estimation procedure, the uncertainty of the scan matching factor is estimated using a method derived from the work of A. Censi. After adding all the factors with their uncertainties and variables, the graph is optimized. For Online applications, sparse nonlinear incremental optimization (iSAM2) is used which achieves improvements in efficiency through incremental variable re-ordering and fluid relinearization, eliminating the need for periodic batch steps as proposed by Kaess. For the full SLAM problem, more accurate solvers, such as the Levenberg-Marquardt solver, are used. One drawback of using iSAM2 in GTSAM is that, as an incremental solver, it cannot estimate the uncertainties of the robot’s past poses. The optimized poses are then used to register all the scans again to build the world map.</p> <h2 id="results">Results</h2> <ol> <li>ICP Alignment</li> </ol> <div class="row justify-content-sm-center"> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/ICP_1-480.webp 480w,/assets/img/project_4/ICP_1-800.webp 800w,/assets/img/project_4/ICP_1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/ICP_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="ICP_1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/ICP_2-480.webp 480w,/assets/img/project_4/ICP_2-800.webp 800w,/assets/img/project_4/ICP_2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/ICP_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="ICP_2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Point Cloud Comparisons before and after ICP: (Left) Source Pointcloud in red at timestamp k and Target Pointcloud in blue and timestamp k-1, (Right) Aligned Pointcloud in green of timestamp k and Target Pointcloud in blue at time k-1. </div> <ol> <li>Graph SLAM Simulation Results</li> </ol> <div class="row justify-content-sm-center"> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/sim_deadreckoning_only_scan-480.webp 480w,/assets/img/project_4/sim_deadreckoning_only_scan-800.webp 800w,/assets/img/project_4/sim_deadreckoning_only_scan-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/sim_deadreckoning_only_scan.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sim_deadreckoning_only_scan" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/sim_pc_odom_only-480.webp 480w,/assets/img/project_4/sim_pc_odom_only-800.webp 800w,/assets/img/project_4/sim_pc_odom_only-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/sim_pc_odom_only.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sim_pc_odom_only" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Simulation: World Point Cloud Constructed Using Dead Reckoning Only(Odometry). Red and Green Axes Indicate Factor Graph Keyframes, Red Arrow Represents Robot Pose Calculated by Graph SLAM, and Yellow Arrow Indicates Ground Truth </div> <div class="row justify-content-sm-center"> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/test_sim5-480.webp 480w,/assets/img/project_4/test_sim5-800.webp 800w,/assets/img/project_4/test_sim5-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/test_sim5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="test_sim5" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-5 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/world_map_simulation-480.webp 480w,/assets/img/project_4/world_map_simulation-800.webp 800w,/assets/img/project_4/world_map_simulation-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/world_map_simulation.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="world_map_simulation" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Simulation: World Point Cloud Constructed Using Pose Graph Optimization via Graph SLAM. Red and Green Axes Indicate Factor Graph Keyframes, Red Arrow Represents Robot Pose Calculated by Graph SLAM, and Yellow Arrow Indicates Ground Truth </div> <ol> <li>Graph SLAM Experimental Validation and Results <strong>Loop Closure</strong>: For experimental validation of the loop closure condition and its effects, a map depicted in Figure below was created. In SLAM, loop closure refers to the process of identifying and closing loops in the robot’s trajectory as it explores an environment. When a robot revisits a previously visited location, loop closure algorithms detect this revisitation point and reconcile the new data with the existing map, effectively ’closing’ the loop. When the robot revisits a keyframe, the uncertainties associated with the keyframes in the graph naturally decrease as the drift is corrected. To demonstrate this effect, the robot was traversed along a circular track in the map. This behavior is evident in Figures below, where as the robot progresses through the map, the uncertainty ellipsoid (depicted in red) gradually expands until it approaches the starting pose. Upon reaching close to the previous keyframe, a new factor is introduced between the current keyframe and the previous keyframes. During the optimization process, this factor facilitates the correction of drift, resulting in a more confident pose graph. This correction is visually indicated by the reduction in the size of the ellipsoids, signifying improved certainty in the robot’s localization and mapping.</li> </ol> <div class="row justify-content-sm-center"> <div class="col-sm-3 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/loop_closer_map-480.webp 480w,/assets/img/project_4/loop_closer_map-800.webp 800w,/assets/img/project_4/loop_closer_map-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/loop_closer_map.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="loop_closer_map" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-3 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/test_real_elllipse_1-480.webp 480w,/assets/img/project_4/test_real_elllipse_1-800.webp 800w,/assets/img/project_4/test_real_elllipse_1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/test_real_elllipse_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="test_real_elllipse_1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-3 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project_4/rest_real_ellipse_2-480.webp 480w,/assets/img/project_4/rest_real_ellipse_2-800.webp 800w,/assets/img/project_4/rest_real_ellipse_2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/project_4/rest_real_ellipse_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="rest_real_ellipse_2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> (Left) Loop-Closure test environment. (Middle) Turtlebot2 Graph SLAM Results without Closed form ICP Covariance Estimation Method. (Right) Turtlebot2 Graph SLAM Results with ICP Covariance Estimation Method. </div> <p>Evaluation Graph SLAM for mapping in an environment with obstacles:</p> <iframe width="960" height="540" src="https://www.youtube.com/embed/caqlL3B6gi8" title="Robust Graph SLAM for Autonomous Navigation" frameborder="0" style="border: 0px solid #bbb; border-radius: 10px; width: 100%;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Thanh-Loc (Leo) PHAM. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>